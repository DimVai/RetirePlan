<!DOCTYPE html>
<html lang="el">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Σύστημα καταμέτρησης εκλογικών αποτελεσμάτων - ΣΥΡΙΖΑ">
    <meta name="author" content="Δημήτρης Βαϊνανίδης">
    <title>Υπολογιστής Σύνταξης</title>

    <link href="/favicon.ico" rel="shortcut icon">
    <meta name="theme-color" content="purple">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="/style.css" rel="stylesheet" media="screen">


    <!-- <script defer src="/resources/script.js?v2.1"></script> -->
    <script defer src="/dim.js"></script>
    <script defer src="/finance.js"></script>
    <script defer src="/dimfinance.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>



  </head>




  <body>


    <div class="body-container">

    <header id="app-header">
        <h1>Υπολογιστής Σύνταξης</h1>
    </header>




    <main>


    <div x-data="{
        useInflation: false,
        nominalInterest: 4,
        inflation: 0,

        realInterest: function(){
            return finance.REALRATE(this.nominalInterest,this.inflation);
        },
        monthlyNominalInterest: function(){
            return finance.NOMINAL(this.nominalInterest/100,12)/12;
        },
        // monthlyRealInterest: function(){
        //     return finance.NOMINAL(this.realInterest()/100,12)/12;
        // },

        presentValue: 0,
        years: 30,
        monthlySavings: 150,
        yearlySavings: function(){
            return this.monthlySavings * 12;
        },
        totalSavings: function(){
            return euro(this.yearlySavings()*this.years);
        },

        futureCapital: function(){
            return -finance.FV( this.monthlyNominalInterest() , 12*this.years , this.monthlySavings , this.presentValue );
        },
        inflationFactor: function(){
            return Math.pow(1+this.inflation/100,this.years);
        },
        futureValue: function(){
            return this.futureCapital()/this.inflationFactor();
        },

        totalNominalExpenses: 1200,
        totalExpenses: function(){
            // if(this.useInflation){
                return Math.ceil(this.totalNominalExpenses * this.inflationFactor());
            // }else{
                // return this.totalNominalExpenses;
            // }
        },
        pension: 700,
        expenses: function(){
            return Math.max(this.totalExpenses()-this.pension,0);
        },
        monthsCovered: function(){
            if (this.useInflation){
                return nPerInflAdj( this.futureCapital() , this.totalExpenses() , this.pension , this.monthlyNominalInterest() , finance.NOMINAL(this.inflation/100,12)/12 );
            }else{
                return finance.NPER( this.monthlyNominalInterest() , this.expenses() , -this.futureCapital()  );
            }
        },
        coveredPeriod: function(){
            return periodDescription(this.monthsCovered());
            
        },
    }" >

        <h2>Επιτόκιο</h2>

        <div class="form-floating">
            <input x-model.number="nominalInterest" type="number" class="form-control" id="nominalInterest" min="0" max="20" step="0.5">
            <label for="nominalInterest">Εκτιμώμενο μέσο επιτόκιο %</label>
        </div>
        <div class="form-check">
            <input x-model.boolean="useInflation" class="form-check-input" type="checkbox" value="" id="flexCheckDefault"
                @change="if (useInflation) { 
                        inflation = 2; 
                        totalNominalExpenses=700;
                        /*nominal+=2;*/
                    } 
                    else { 
                        totalNominalExpenses=1200;
                        inflation = 0;
                        /*nominal-=2;*/
                    }"
            >
            <label class="form-check-label" for="flexCheckDefault">
                Χρήση πληθωρισμού στους υπολογισμούς
            </label>
        </div>
        <div x-cloak x-show="useInflation">
            <div class="form-floating">
                <input x-model.number="inflation" type="number" class="form-control" id="inflation" min="0" max="8" step="0.5">
                <label for="inflation">Εκτιμώμενος μέσος πληθωρισμός %</label>
            </div>
            <div class="form-floating">
                <input x-model="percent(realInterest())" type="text" class="form-control" id="realInterest" disabled>
                <label for="realInterest">Εκτιμώμενο μέσο πραγματικό επιτόκιο</label>
            </div>
        </div>

        
        <hr>

        <h2>Αποταμίευση</h2>
        <div class="form-floating">
            <input x-model.number="presentValue" type="number" class="form-control" id="presentValue" min="0" step="500">
            <label for="presentValue">Διαθέσιμο ποσό σε € σήμερα</label>
        </div>
        <div class="form-floating">
            <input x-model.number="years" type="number" class="form-control" id="years" min="0" max="50">
            <label for="years">Έτη αποταμίευσης</label>
        </div>

        <div class="row">
            <div class="col-md-6"><div class="form-floating ">
                <input x-model.number="monthlySavings" type="number" class="form-control" id="monthlySavings" min="0" step="20">
                <label for="monthlySavings">Μηνιαίο ποσό αποταμίευσης σε €</label>
            </div></div>
            <div class="col-md-6 center-contents">
                <input x-model.number="monthlySavings" type="range" class="form-range bg-light" id="monthlySavingsRange" min="0" step="20" max="500">
            </div>
        </div>

        <!-- <div class="form-floating">
            <input x-model="yearlySavings" type="text" class="form-control" id="yearlySavings" disabled>
            <label for="yearlySavings">Ετήσιο ποσό αποταμίευσης σε € (χωρίς τόκους)</label>
        </div> -->
        <div class="form-floating">
            <input x-model="totalSavings" type="text" class="form-control" id="totalSavings" disabled>
            <label for="totalSavings">Συνολικό ποσό αποταμίευσης (χωρίς τόκους)</label>
        </div>
        <div class="form-floating border border-1 border-primary">
            <input x-model="euro(futureCapital())" type="text" class="form-control" id="futureCapital" disabled>
            <label for="futureCapital">Τελικό κεφάλαιο που θα έχει συσσωρευτεί</label>
        </div>
        <div x-cloak x-show="useInflation" class="form-floating">
            <input x-model="euro(futureValue())" type="text" class="form-control" id="futureValue" disabled>
            <label for="futureValue">Σημερινή αξία τελικού κεφαλαίου (λόγω πληθωρισμού)</label>
        </div>


        <hr>
        <h2>Κατανάλωση</h2>
        <div class="form-floating ">
            <input x-model.number="totalNominalExpenses" type="number" class="form-control" id="totalNominalExpenses" min="0" step="20">
            <label for="totalNominalExpenses">Υπολογιζόμενα μηνιαία έξοδα κατά την περίοδο συνταξιοδότησης σε € <span x-show="useInflation">με σημερινή αξία</span> </label>
        </div>
        <div x-cloak x-show="useInflation" class="form-floating" >
            <input x-model="Math.ceil(totalExpenses())" type="text" class="form-control" id="totalExpenses" min="0" step="20" disabled>
            <label for="totalExpenses">Μηνιαία ονομαστικά έξοδα στην αρχή της συνταξιοδότησης σε € με μελλοντική αξία </label>
        </div>
        <div class="form-floating">
            <input x-model.number="pension" type="number" class="form-control" id="pension" min="0" step="20">
            <label for="pension">Μηνιαία κρατική σύνταξη σε €</label>
        </div>
        <div class="form-floating">
            <input x-model="euro(expenses())" type="text" class="form-control" id="expenses" disabled>
            <label for="expenses">Ποσό που θα καταναλώνεται από το προσωπικό πλάνο <span x-show="useInflation">στην αρχή της συνταξιοδότησης</span></label>
        </div>
        <div class="form-floating border border-1 border-primary">
            <input x-model="coveredPeriod" type="text" class="form-control" id="coveredPeriod" disabled>
            <label for="coveredPeriod">Περίοδος κάλυψης</label>
        </div>



    </div>












        <hr>


    </main>



    <footer>

    </footer>






    </div>
  </body>
</html>
